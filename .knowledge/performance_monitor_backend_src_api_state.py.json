{"is_source_file": true, "format": "Python", "description": "This file defines the AppState data class used for shared application state management, including configuration, MongoDB manager, and background tasks. It also provides functions to initialize and retrieve this state within a FastAPI application.", "external_files": ["src.api.config", "src.api.db.mongo"], "external_methods": ["FastAPI", "BackendConfig", "MongoManager"], "published": ["init_state", "get_state"], "classes": [{"name": "AppState", "description": "Typed container for shared application state, including configuration, database manager, and optional background tasks."}], "methods": [{"name": "None init_state(app: FastAPI, config: BackendConfig)", "description": "Initializes the FastAPI app's state with a MongoManager instance and configuration.", "scope": "", "scopeKind": ""}, {"name": "AppState get_state(app: FastAPI)", "description": "Retrieves the typed AppState from a FastAPI application instance.", "scope": "", "scopeKind": ""}], "calls": ["MongoManager", "app.state.state"], "search-terms": ["AppState", "FastAPI state management", "MongoManager", "initialize application state", "performance monitoring backend"], "state": 2, "file_id": 23, "knowledge_revision": 86, "git_revision": "d74cfd9e45156ce797a4585d816d9a2c1367cabf", "revision_history": [{"56": "ac108bb99020dc67cfe8a133c3fe05fd9ce788f5"}, {"67": "9e7446029497066b1021343648c0face5bcaa592"}, {"86": "d74cfd9e45156ce797a4585d816d9a2c1367cabf"}], "ctags": [{"_type": "tag", "name": "AppState", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^class AppState:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "alerts_task", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^    alerts_task: Optional[object] = None  # asyncio.Task, but kept loose to avoid import cycles$/", "language": "Python", "typeref": "typename:Optional[object]", "kind": "variable", "scope": "AppState", "scopeKind": "class"}, {"_type": "tag", "name": "get_state", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^def get_state(app: FastAPI) -> AppState:$/", "language": "Python", "typeref": "typename:AppState", "kind": "function", "signature": "(app: FastAPI)"}, {"_type": "tag", "name": "init_state", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^def init_state(app: FastAPI, config: BackendConfig) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(app: FastAPI, config: BackendConfig)"}, {"_type": "tag", "name": "rollup_task", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^    rollup_task: Optional[object] = None  # asyncio.Task for metrics rollup loop$/", "language": "Python", "typeref": "typename:Optional[object]", "kind": "variable", "scope": "AppState", "scopeKind": "class"}, {"_type": "tag", "name": "sampler_task", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^    sampler_task: Optional[object] = None  # asyncio.Task, but kept loose to avoid import cycles$/", "language": "Python", "typeref": "typename:Optional[object]", "kind": "variable", "scope": "AppState", "scopeKind": "class"}], "hash": "052f99c3f9e711063d9909ce77ed67d8", "format-version": 4, "code-base-name": "performance_monitor_backend", "filename": "performance_monitor_backend/src/api/state.py", "fields": [{"name": "Optional[object] alerts_task", "scope": "AppState", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[object] rollup_task", "scope": "AppState", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[object] sampler_task", "scope": "AppState", "scopeKind": "class", "description": "unavailable"}]}