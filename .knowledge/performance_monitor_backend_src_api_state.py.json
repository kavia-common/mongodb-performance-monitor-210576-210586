{"is_source_file": true, "format": "Python", "description": "This file defines the AppState data class and two functions for initializing and retrieving application state within a FastAPI-based backend. It manages shared singletons such as configuration and MongoDB connection, facilitating dependency injection and global state management.", "external_files": ["src.api.config", "src.api.db.mongo"], "external_methods": ["FastAPI", "app.state"], "published": ["init_state", "get_state", "AppState"], "classes": [{"name": "AppState", "description": "A container class for sharing application-wide singleton instances such as configuration, database connection, and ongoing tasks."}], "methods": [{"name": "None init_state(app: FastAPI, config: BackendConfig)", "description": "Initializes the FastAPI app's state with a new AppState containing configuration and MongoDB manager.", "scope": "", "scopeKind": ""}, {"name": "AppState get_state(app: FastAPI)", "description": "Retrieves the current AppState from the FastAPI application instance.", "scope": "", "scopeKind": ""}], "calls": ["MongoManager(config.mongo_uri)"], "search-terms": ["AppState", "FastAPI app state", "MongoManager", "shared singleton", "state initialization"], "state": 2, "file_id": 23, "knowledge_revision": 67, "git_revision": "9e7446029497066b1021343648c0face5bcaa592", "revision_history": [{"56": "ac108bb99020dc67cfe8a133c3fe05fd9ce788f5"}, {"67": "9e7446029497066b1021343648c0face5bcaa592"}], "ctags": [{"_type": "tag", "name": "AppState", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^class AppState:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "alerts_task", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^    alerts_task: Optional[object] = None  # asyncio.Task, but kept loose to avoid import cycles$/", "language": "Python", "typeref": "typename:Optional[object]", "kind": "variable", "scope": "AppState", "scopeKind": "class"}, {"_type": "tag", "name": "get_state", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^def get_state(app: FastAPI) -> AppState:$/", "language": "Python", "typeref": "typename:AppState", "kind": "function", "signature": "(app: FastAPI)"}, {"_type": "tag", "name": "init_state", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^def init_state(app: FastAPI, config: BackendConfig) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(app: FastAPI, config: BackendConfig)"}, {"_type": "tag", "name": "sampler_task", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/state.py", "pattern": "/^    sampler_task: Optional[object] = None  # asyncio.Task, but kept loose to avoid import cycles$/", "language": "Python", "typeref": "typename:Optional[object]", "kind": "variable", "scope": "AppState", "scopeKind": "class"}], "hash": "4339c271aa1871b7a1def471201b5b1b", "format-version": 4, "code-base-name": "performance_monitor_backend", "filename": "performance_monitor_backend/src/api/state.py", "fields": [{"name": "Optional[object] alerts_task", "scope": "AppState", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[object] sampler_task", "scope": "AppState", "scopeKind": "class", "description": "unavailable"}]}