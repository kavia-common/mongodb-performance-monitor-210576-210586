{"is_source_file": true, "format": "Python", "description": "This is a test configuration script (conftest.py) for pytest fixtures related to MongoDB and FastAPI application testing. It defines fixtures for database connections, environment setup, and HTTP client interactions for integration and unit tests within a MongoDB-backed FastAPI application.", "external_files": ["mongodb_instance/db_connection.txt", "src/api/main.py"], "external_methods": ["pytest.MonkeyPatch.setenv", "pytest.MonkeyPatch.delenv", "httpx.ASGITransport", "httpx.AsyncClient", "pymongo.MongoClient"], "published": ["mongo_uri", "mongo_client", "mongo_db", "app", "async_client", "create_test_instance"], "classes": [], "methods": [{"name": "str|None _parse_db_connection_uri(text: str)", "description": "Parses MongoDB connection URI from a text input, supporting formats with 'mongosh' prefix or direct 'mongodb://' URIs.", "scope": "", "scopeKind": ""}, {"name": "str _load_repo_mongo_uri()", "description": "Resolves the MongoDB URI for testing by reading from a connection file or environment variable.", "scope": "", "scopeKind": ""}, {"name": "None _clean_perfmon_collections(mongo_db)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app(monkeypatch: pytest.MonkeyPatch, mongo_uri: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AsyncIterator[httpx.AsyncClient] async_client(app)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str create_test_instance(async_client: httpx.AsyncClient)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Iterator[MongoClient] mongo_client(mongo_uri: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "mongo_db(mongo_client: MongoClient)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str mongo_uri()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["os.path.abspath", "os.path.join", "os.path.exists", "os.getenv", "open", "re.search", "MongoClient"], "search-terms": ["conftest.py", "pytest fixtures", "MongoDB testing", "FastAPI test setup", "async test client", "Mongo URI load", "test environment setup"], "state": 2, "file_id": 32, "knowledge_revision": 95, "git_revision": "", "ctags": [{"_type": "tag", "name": "_clean_perfmon_collections", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^def _clean_perfmon_collections(mongo_db) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(mongo_db)"}, {"_type": "tag", "name": "_load_repo_mongo_uri", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^def _load_repo_mongo_uri() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_parse_db_connection_uri", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^def _parse_db_connection_uri(text: str) -> str | None:$/", "language": "Python", "typeref": "typename:str|None", "kind": "function", "signature": "(text: str)"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^def app(monkeypatch: pytest.MonkeyPatch, mongo_uri: str):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch: pytest.MonkeyPatch, mongo_uri: str)"}, {"_type": "tag", "name": "async_client", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^async def async_client(app) -> AsyncIterator[httpx.AsyncClient]:$/", "language": "Python", "typeref": "typename:AsyncIterator[httpx.AsyncClient]", "kind": "function", "signature": "(app)"}, {"_type": "tag", "name": "create_test_instance", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^async def create_test_instance(async_client: httpx.AsyncClient) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(async_client: httpx.AsyncClient)"}, {"_type": "tag", "name": "fastapi_app", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^    from src.api.main import app as fastapi_app$/", "file": true, "language": "Python", "kind": "unknown", "scope": "app", "scopeKind": "function", "nameref": "unknown:app"}, {"_type": "tag", "name": "mongo_client", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^def mongo_client(mongo_uri: str) -> Iterator[MongoClient]:$/", "language": "Python", "typeref": "typename:Iterator[MongoClient]", "kind": "function", "signature": "(mongo_uri: str)"}, {"_type": "tag", "name": "mongo_db", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^def mongo_db(mongo_client: MongoClient):$/", "language": "Python", "kind": "function", "signature": "(mongo_client: MongoClient)"}, {"_type": "tag", "name": "mongo_uri", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/tests/conftest.py", "pattern": "/^def mongo_uri() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}], "hash": "430579f787143525a61c3e3eac7fc705", "format-version": 4, "code-base-name": "performance_monitor_backend", "filename": "performance_monitor_backend/tests/conftest.py", "revision_history": [{"95": ""}]}