{"is_source_file": true, "format": "Python", "description": "This source file defines API endpoints for health checks for the backend service, including a basic liveness check and a MongoDB connectivity diagnostic. It uses FastAPI to define routes and Pydantic models for responses.", "external_files": ["src.api.schemas.common", "src.api.state"], "external_methods": ["src.api.schemas.common.HealthResponse", "src.api.schemas.common.utc_now", "src.api.state.get_state", "re.sub"], "published": ["health_check", "mongo_connectivity_check"], "classes": [{"name": "MongoConnectivityResponse", "description": "Response model that encapsulates MongoDB connectivity check diagnostics, including connection status, URI source, sanitized URI, timestamp, and optional debug metadata."}], "methods": [{"name": "str _sanitize_mongo_uri_for_response(uri: str)", "description": "Sanitizes a MongoDB URI by masking credentials to avoid exposing secrets when returning data to clients.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse health_check()", "description": "Handler for the root health endpoint; returns a simple liveness status indicating the service is healthy.", "scope": "", "scopeKind": ""}, {"name": "MongoConnectivityResponse mongo_connectivity_check(request: Request)", "description": "Endpoint that pings MongoDB and returns detailed diagnostics about the connection, including whether the ping was successful and the sanitized URI.", "scope": "", "scopeKind": ""}], "calls": ["re.sub", "get_state", "utc_now", "MongoConnectivityResponse", "HealthResponse"], "search-terms": ["MongoConnectivityResponse", "health_check", "mongo_connectivity", "API router", "FastAPI"], "state": 2, "file_id": 13, "knowledge_revision": 81, "git_revision": "09410bea15e21a7e3c9b73c6e17854e1898bd9de", "revision_history": [{"35": "5c1110a3ebc62d3d78963eacede0143bf7676821"}, {"81": "09410bea15e21a7e3c9b73c6e17854e1898bd9de"}], "ctags": [{"_type": "tag", "name": "MongoConnectivityResponse", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^class MongoConnectivityResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_sanitize_mongo_uri_for_response", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^def _sanitize_mongo_uri_for_response(uri: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(uri: str)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^def health_check() -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^    meta: Dict[str, Any] = Field(default_factory=dict, description=\"Optional debug metadata.\")$/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "MongoConnectivityResponse", "scopeKind": "class"}, {"_type": "tag", "name": "mongo_connectivity_check", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^def mongo_connectivity_check(request: Request) -> MongoConnectivityResponse:$/", "language": "Python", "typeref": "typename:MongoConnectivityResponse", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "mongo_uri_sanitized", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^    mongo_uri_sanitized: str = Field(..., description=\"MongoDB URI with credentials masked.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "MongoConnectivityResponse", "scopeKind": "class"}, {"_type": "tag", "name": "mongo_uri_source", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^    mongo_uri_source: str = Field(..., description=\"Which source provided the effective MongoDB /", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "MongoConnectivityResponse", "scopeKind": "class"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^    ok: bool = Field(..., description=\"Whether the backend can successfully ping MongoDB.\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "MongoConnectivityResponse", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^router = APIRouter(tags=[\"Health\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/routers/health.py", "pattern": "/^    timestamp: str = Field(..., description=\"UTC timestamp when the check was performed (ISO str/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "MongoConnectivityResponse", "scopeKind": "class"}], "hash": "6d11a189c2eea73b00b0a90986f294ae", "format-version": 4, "code-base-name": "performance_monitor_backend", "filename": "performance_monitor_backend/src/api/routers/health.py", "fields": [{"name": "Dict[str, Any] meta", "scope": "MongoConnectivityResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str mongo_uri_sanitized", "scope": "MongoConnectivityResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str mongo_uri_source", "scope": "MongoConnectivityResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ok", "scope": "MongoConnectivityResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"Health\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str timestamp", "scope": "MongoConnectivityResponse", "scopeKind": "class", "description": "unavailable"}]}