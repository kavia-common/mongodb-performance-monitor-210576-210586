{"is_source_file": true, "format": "Python", "description": "This file defines a MongoDB connection manager for a performance monitoring backend system. It includes data classes for collection references, methods for establishing connections, performing health checks, and managing indexes related to application-specific collections such as instances, metrics, alerts, and recommendations.", "external_files": ["pymongo", "pymongo.collection", "pymongo.database", "pymongo.errors", "logging"], "external_methods": ["pymongo.MongoClient", "pymongo.collection.Collection.create_index", "pymongo.database.Database.__getitem__", "pymongo.errors.PyMongoError"], "published": ["MongoCollections", "MongoManager", "APP_DB_NAME"], "classes": [{"name": "MongoCollections", "description": "A data class that groups references to MongoDB collections used by the application."}, {"name": "MongoManager", "description": "A class responsible for managing MongoDB connections, performing health checks, handling indexes, and maintaining caches of connection clients."}], "methods": [{"name": "None connect_app(self)", "description": "Initializes the application MongoDB client if it is not already connected.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "bool ping(self, timeout_ms: int = 1500)", "description": "Checks connectivity to MongoDB by sending a ping command.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "None close(self)", "description": "Closes all managed MongoDB client connections.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "Database app_db(self)", "description": "Returns the database handle for the application's primary database.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "MongoCollections collections(self)", "description": "Returns an object containing references to key application collections.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "None init_indexes(self)", "description": "Creates necessary indexes on the application's collections to ensure efficient queries.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "MongoClient target_client(self, instance_id: str, uri: str)", "description": "Returns or creates a cached MongoClient for a specific monitored target instance.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "__init__(self, app_mongo_uri: str)", "scope": "MongoManager", "scopeKind": "class", "description": "unavailable"}], "calls": ["MongoClient", "MongoClient.admin.command", "Database.__getitem__", "Collection.create_index"], "search-terms": ["MongoManager", "MongoCollections", "init_indexes", "app_mongo_uri", "perfmon", "target_client", "connect_app", "ping"], "state": 2, "file_id": 22, "knowledge_revision": 79, "git_revision": "09410bea15e21a7e3c9b73c6e17854e1898bd9de", "revision_history": [{"55": "ac108bb99020dc67cfe8a133c3fe05fd9ce788f5"}, {"59": "d21f925c1fc950dcc3050ff0205bcb57f4237af9"}, {"66": "9e7446029497066b1021343648c0face5bcaa592"}, {"79": "09410bea15e21a7e3c9b73c6e17854e1898bd9de"}], "ctags": [{"_type": "tag", "name": "APP_DB_NAME", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^APP_DB_NAME = \"perfmon\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MongoCollections", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^class MongoCollections:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MongoManager", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^class MongoManager:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def __init__(self, app_mongo_uri: str):$/", "language": "Python", "kind": "member", "signature": "(self, app_mongo_uri: str)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "app_db", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def app_db(self) -> Database:$/", "language": "Python", "typeref": "typename:Database", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "close", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def close(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "collections", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def collections(self) -> MongoCollections:$/", "language": "Python", "typeref": "typename:MongoCollections", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "connect_app", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def connect_app(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "init_indexes", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def init_indexes(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ping", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def ping(self, timeout_ms: int = 1500) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, timeout_ms: int = 1500)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "target_client", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def target_client(self, instance_id: str, uri: str) -> MongoClient:$/", "language": "Python", "typeref": "typename:MongoClient", "kind": "member", "signature": "(self, instance_id: str, uri: str)", "scope": "MongoManager", "scopeKind": "class"}], "hash": "97e35a7892f2bd1f17ff5b8c82dd6643", "format-version": 4, "code-base-name": "performance_monitor_backend", "filename": "performance_monitor_backend/src/api/db/mongo.py", "fields": [{"name": "APP_DB_NAME = \"perfmon\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}]}