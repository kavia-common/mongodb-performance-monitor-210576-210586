{"is_source_file": true, "format": "Python", "description": "This file provides a MongoDB database management utility for a performance monitoring backend, including connection handling, index creation, and collection schema definitions.", "external_files": ["pymongo", "pymongo.collection", "pymongo.database"], "external_methods": ["MongoClient", "Collection.create_index"], "published": [], "classes": [{"name": "MongoCollections", "description": "A dataclass providing grouped references to MongoDB collection objects used in the app."}, {"name": "MongoManager", "description": "A class managing MongoDB connections, including app and target clients, index initialization, and providing access to collections."}], "methods": [{"name": "None connect_app(self)", "description": "Initializes the application MongoDB client if it is not already connected.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "None close(self)", "description": "Closes all MongoDB clients managed by the MongoManager, including app and target clients.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "Database app_db(self)", "description": "Returns the MongoDB Database object for the application's database ('perfmon').", "scope": "MongoManager", "scopeKind": "class"}, {"name": "MongoCollections collections(self)", "description": "Returns a MongoCollections dataclass containing references to the key collections used by the application.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "None init_indexes(self)", "description": "Creates required indexes on collections; idempotent operation to optimize queries.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "MongoClient target_client(self, instance_id: str, uri: str)", "description": "Returns a cached MongoClient for a specified target instance, creating one if necessary.", "scope": "MongoManager", "scopeKind": "class"}, {"name": "__init__(self, app_mongo_uri: str)", "scope": "MongoManager", "scopeKind": "class", "description": "unavailable"}], "calls": ["MongoClient", "MongoClient.close", "Database.__getitem__", "Collection.create_index"], "search-terms": ["MongoManager", "collections", "indexes", "target_client", "perfmon database"], "state": 2, "file_id": 22, "knowledge_revision": 66, "git_revision": "9e7446029497066b1021343648c0face5bcaa592", "revision_history": [{"55": "ac108bb99020dc67cfe8a133c3fe05fd9ce788f5"}, {"59": "d21f925c1fc950dcc3050ff0205bcb57f4237af9"}, {"66": "9e7446029497066b1021343648c0face5bcaa592"}], "ctags": [{"_type": "tag", "name": "APP_DB_NAME", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^APP_DB_NAME = \"perfmon\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MongoCollections", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^class MongoCollections:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MongoManager", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^class MongoManager:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def __init__(self, app_mongo_uri: str):$/", "language": "Python", "kind": "member", "signature": "(self, app_mongo_uri: str)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "app_db", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def app_db(self) -> Database:$/", "language": "Python", "typeref": "typename:Database", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "close", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def close(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "collections", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def collections(self) -> MongoCollections:$/", "language": "Python", "typeref": "typename:MongoCollections", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "connect_app", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def connect_app(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "init_indexes", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def init_indexes(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "MongoManager", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "target_client", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/db/mongo.py", "pattern": "/^    def target_client(self, instance_id: str, uri: str) -> MongoClient:$/", "language": "Python", "typeref": "typename:MongoClient", "kind": "member", "signature": "(self, instance_id: str, uri: str)", "scope": "MongoManager", "scopeKind": "class"}], "hash": "29660711d003e043bbf4575e2e3f1cda", "format-version": 4, "code-base-name": "performance_monitor_backend", "filename": "performance_monitor_backend/src/api/db/mongo.py", "fields": [{"name": "APP_DB_NAME = \"perfmon\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}]}