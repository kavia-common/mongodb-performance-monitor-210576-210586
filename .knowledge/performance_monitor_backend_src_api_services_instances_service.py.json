{"is_source_file": true, "format": "Python", "description": "This file implements services for managing MongoDB instances, including creating, retrieving, updating, deleting, and listing instances, as well as building connection URIs. It serves as part of a backend API for managing MongoDB instance configurations.", "external_files": ["src.api.schemas.common", "src.api.schemas.instances", "src.api.state"], "external_methods": ["get_state", "utc_now"], "published": ["list_instances", "get_instance", "create_instance", "update_instance", "delete_instance", "list_active_instance_docs"], "classes": [], "methods": [{"name": "InstanceOut _doc_to_out(doc: dict)", "description": "Converts a MongoDB document dictionary into an InstanceOut schema object.", "scope": "", "scopeKind": ""}, {"name": "List[InstanceOut] list_instances(request: Request)", "description": "Returns all stored MongoDB instances.", "scope": "", "scopeKind": ""}, {"name": "Optional[InstanceOut] get_instance(request: Request, instance_id: str)", "description": "Retrieves a single instance by its ID.", "scope": "", "scopeKind": ""}, {"name": "str _build_target_uri(payload: InstanceCreate | InstanceOut | dict)", "description": "Builds a MongoDB connection URI from instance data or create/update payload.", "scope": "", "scopeKind": ""}, {"name": "InstanceOut create_instance(request: Request, payload: InstanceCreate)", "description": "Creates and stores a new instance record in MongoDB.", "scope": "", "scopeKind": ""}, {"name": "Optional[InstanceOut] update_instance(request: Request, instance_id: str, payload: InstanceUpdate)", "description": "Updates an existing instance record with provided data.", "scope": "", "scopeKind": ""}, {"name": "bool delete_instance(request: Request, instance_id: str)", "description": "Deletes an instance by ID, returning whether the deletion was successful.", "scope": "", "scopeKind": ""}, {"name": "List[dict] list_active_instance_docs(request: Request)", "description": "Returns raw document data for active instances, used internally.", "scope": "", "scopeKind": ""}], "calls": ["get_state(request.app).mongo.collections", "cols.instances.find", "cols.instances.find_one", "cols.instances.insert_one", "cols.instances.replace_one", "cols.instances.delete_one"], "search-terms": ["instances_service", "MongoDB URI builder", "instance CRUD", "instance management", "active instances list", "MongoDB connection URI"], "state": 2, "file_id": 10, "knowledge_revision": 48, "git_revision": "ac108bb99020dc67cfe8a133c3fe05fd9ce788f5", "revision_history": [{"32": "5c1110a3ebc62d3d78963eacede0143bf7676821"}, {"48": "ac108bb99020dc67cfe8a133c3fe05fd9ce788f5"}], "ctags": [{"_type": "tag", "name": "_build_target_uri", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def _build_target_uri(payload: InstanceCreate | InstanceOut | dict) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(payload: InstanceCreate | InstanceOut | dict)"}, {"_type": "tag", "name": "_doc_to_out", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def _doc_to_out(doc: dict) -> InstanceOut:$/", "language": "Python", "typeref": "typename:InstanceOut", "kind": "function", "signature": "(doc: dict)"}, {"_type": "tag", "name": "create_instance", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def create_instance(request: Request, payload: InstanceCreate) -> InstanceOut:$/", "language": "Python", "typeref": "typename:InstanceOut", "kind": "function", "signature": "(request: Request, payload: InstanceCreate)"}, {"_type": "tag", "name": "delete_instance", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def delete_instance(request: Request, instance_id: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(request: Request, instance_id: str)"}, {"_type": "tag", "name": "get_instance", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def get_instance(request: Request, instance_id: str) -> Optional[InstanceOut]:$/", "language": "Python", "typeref": "typename:Optional[InstanceOut]", "kind": "function", "signature": "(request: Request, instance_id: str)"}, {"_type": "tag", "name": "list_active_instance_docs", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def list_active_instance_docs(request: Request) -> List[dict]:$/", "language": "Python", "typeref": "typename:List[dict]", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "list_instances", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def list_instances(request: Request) -> List[InstanceOut]:$/", "language": "Python", "typeref": "typename:List[InstanceOut]", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "update_instance", "path": "/home/kavia/workspace/code-generation/mongodb-performance-monitor-210576-210586/performance_monitor_backend/src/api/services/instances_service.py", "pattern": "/^def update_instance(request: Request, instance_id: str, payload: InstanceUpdate) -> Optional[Ins/", "language": "Python", "typeref": "typename:Optional[InstanceOut]", "kind": "function", "signature": "(request: Request, instance_id: str, payload: InstanceUpdate)"}], "hash": "9a31b7b2e38df1115a506d5cd8136945", "format-version": 4, "code-base-name": "performance_monitor_backend", "filename": "performance_monitor_backend/src/api/services/instances_service.py"}